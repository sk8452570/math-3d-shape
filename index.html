<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Er Sandip | Math Shape Visualizer</title>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#000;
  color:white;
}
header{
  text-align:center;
  padding:20px;
  background:#020617;
}
header img{
  width:90px;
  height:90px;
  border-radius:50%;
  border:2px solid white;
}
input,select{
  width:90%;
  max-width:360px;
  padding:8px;
  margin:6px auto;
  display:block;
}
button{
  padding:6px 12px;
  font-size:13px;
  border:none;
  border-radius:6px;
  background:#2563eb;
  color:white;
  cursor:pointer;
  margin:4px;
}
#graph{
  width:98%;
  height:90vh;
  margin:20px auto;
  background:white;
  border-radius:12px;
  transition:all 0.3s ease;
}
#graph.fullscreen{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:9999;
  border-radius:0;
}
#controls3d{
  text-align:center;
  margin-top:8px;
}
footer{
  text-align:center;
  padding:10px;
  background:#020617;
  color:#94a3b8;
}
@media(max-width:768px){
  #graph{height:75vh;}
}
</style>
</head>

<body>

<header>
  <img src="me.png">
  <h1>Er Sandip's Math Shape Visualizer</h1>
  <p>2D Front Geometry (Clear Shape) & 3D Surfaces</p>

  <!-- GEOMETRY DROPDOWN -->
  <select id="preset" onchange="applyPreset()">
    <option value="">-- 2D Geometry Shapes --</option>
    <option value="x - y">Straight Line</option>
    <option value="x*x + y*y - 25">Circle</option>
    <option value="x*x/9 + y*y/4 - 1">Ellipse</option>
    <option value="x*x - y">Parabola</option>
    <option value="y*y - 4*x">Sideways Parabola</option>
    <option value="x*x - y*y - 1">Hyperbola</option>
    <option value="Math.abs(x)+Math.abs(y)-5">Rhombus (Diamond)</option>
    <option value="Math.max(Math.abs(x),Math.abs(y))-4">Square</option>
    <option value="Math.sin(x)-y">Sine Curve</option>
    <option value="Math.cos(x)-y">Cosine Curve</option>
    <option value="Math.tan(x)-y">Tangent Curve</option>
    <option value="x*x*x - y">Cubic Curve</option>
    <option value="Math.exp(x)-y">Exponential Curve</option>
    <option value="Math.log(Math.abs(x)+1)-y">Logarithmic Curve</option>
    <option value="">-- Special Curve --</option>
    <option value="butterfly_curve">Butterfly Curve</option>
    <option value="">-- 3D Geometry Surfaces --</option>
    <option value="x*x + y*y + z*z - 25">Sphere</option>
    <option value="x*x + y*y - z">Paraboloid</option>
    <option value="z - x*x - y*y">Elliptic Paraboloid</option>
    <option value="x*x + y*y - 9">Cylinder</option>
    <option value="z*z - x*x - y*y">Cone</option>
    <option value="x*x + y*y - z*z - 1">Hyperboloid (One Sheet)</option>
    <option value="x*x + y*y - z*z + 1">Hyperboloid (Two Sheet)</option>
  </select>

  <!-- MULTIPLE EQUATIONS -->
  <input id="eq1" placeholder="Equation 1">
  <input id="eq2" placeholder="Equation 2 (optional)">
  <input id="eq3" placeholder="Equation 3 (optional)">

  <select id="mode">
    <option value="2d">2D</option>
    <option value="3d">3D</option>
  </select>

  <button onclick="draw()">Draw</button>
  <button onclick="voiceDraw()">ðŸŽ¤ Voice</button>
  <button onclick="toggleFullscreen()">â›¶ Maximize</button>
</header>

<!-- 3D VIEW CONTROLS -->
<div id="controls3d">
  <label for="camera3d">3D View:</label>
  <select id="camera3d" onchange="updateCamera()">
    <option value="iso">Isometric</option>
    <option value="top">Top</option>
    <option value="front">Front</option>
    <option value="back">Back</option>
    <option value="left">Left</option>
    <option value="right">Right</option>
  </select>
</div>

<div id="graph"></div>

<footer>Â© 2026 Er Sandip</footer>

<script>
function safeEval(expr,x,y,z){
  return Function("x","y","z","with(Math){return "+expr+"}")(x,y,z);
}

function applyPreset(){
  if(preset.value === "butterfly_curve"){
    eq1.value = ""; eq2.value = ""; eq3.value = "";
    mode.value = "2d";
  } else {
    eq1.value = preset.value; eq2.value = ""; eq3.value = "";
  }
}

function draw(){
  if(preset.value === "butterfly_curve"){
    drawButterfly(); return;
  }

  let eqs=[eq1.value,eq2.value,eq3.value].filter(e=>e.trim());
  if(eqs.length===0) return alert("Equation likho");

  if(mode.value==="2d") draw2D(eqs);
  else draw3D(eqs);
}

/* -------- 2D FRONT VIEW -------- */
function draw2D(eqs){
  let data=[]; let xs=[], ys=[];
  for(let i=-10;i<=10;i+=0.05) xs.push(i);
  for(let j=-10;j<=10;j+=0.05) ys.push(j);

  eqs.forEach(eq=>{
    let Z=[];
    ys.forEach(y=>{
      let row=[];
      xs.forEach(x=>{
        try{ row.push(safeEval(eq,x,y,0)); }
        catch{ row.push(null); }
      });
      Z.push(row);
    });
    data.push({
      type:"contour", x:xs, y:ys, z:Z,
      contours:{start:0,end:0,coloring:"lines"},
      line:{color:"black",width:3}, showscale:false
    });
  });

  Plotly.newPlot("graph",data,{
    paper_bgcolor:"#000",
    plot_bgcolor:"#fff",
    xaxis:{color:"black",scaleanchor:"y"},
    yaxis:{color:"black"}
  });
}

/* -------- BUTTERFLY -------- */
function drawButterfly(){
  let X=[],Y=[];
  for(let t=0;t<=12*Math.PI;t+=0.01){
    let x=Math.sin(t)*(Math.exp(Math.cos(t))-2*Math.cos(4*t)-Math.pow(Math.sin(t/12),5));
    let y=Math.cos(t)*(Math.exp(Math.cos(t))-2*Math.cos(4*t)-Math.pow(Math.sin(t/12),5));
    X.push(x); Y.push(y);
  }

  Plotly.newPlot("graph",[{
    x:X, y:Y, mode:"lines", line:{color:"red",width:3}
  }],{
    paper_bgcolor:"#000",
    plot_bgcolor:"#fff",
    xaxis:{color:"black",scaleanchor:"y"},
    yaxis:{color:"black"}
  });
}

/* -------- 3D -------- */
let last3Ddata = [];
function draw3D(eqs){
  let data=[]; last3Ddata=[];
  eqs.forEach(eq=>{
    let xs=[],ys=[],zs=[],v=[];
    for(let x=-5;x<=5;x+=0.4)
    for(let y=-5;y<=5;y+=0.4)
    for(let z=-5;z<=5;z+=0.4){
      try{
        let val=safeEval(eq,x,y,z);
        xs.push(x); ys.push(y); zs.push(z); v.push(val);
      }catch{}
    }
    let surface={type:"isosurface",x:xs,y:ys,z:zs,value:v,isomin:-0.4,isomax:0.4,opacity:0.85,caps:{x:false,y:false,z:false}};
    data.push(surface);
  });
  last3Ddata=data;

  Plotly.newPlot("graph",data,{
    paper_bgcolor:"#000",
    scene:{bgcolor:"#fff",xaxis:{color:"black"},yaxis:{color:"black"},zaxis:{color:"black"},dragmode:"orbit"},
    displayModeBar:true,
    scrollZoom:true
  });
}

/* -------- UPDATE CAMERA -------- */
function updateCamera(){
  if(mode.value!=="3d") return;
  let view=camera3d.value;
  let camera;
  switch(view){
    case "top": camera={eye:{x:0,y:0,z:2}}; break;
    case "front": camera={eye:{x:0,y:2,z:0}}; break;
    case "back": camera={eye:{x:0,y:-2,z:0}}; break;
    case "left": camera={eye:{x:-2,y:0,z:0}}; break;
    case "right": camera={eye:{x:2,y:0,z:0}}; break;
    default: camera={eye:{x:1.25,y:1.25,z:1.25}}; // iso
  }
  Plotly.relayout(graph,{"scene.camera":camera});
}

/* -------- FULLSCREEN -------- */
function toggleFullscreen(){
  graph.classList.toggle("fullscreen");
  Plotly.Plots.resize(graph);
}

/* -------- VOICE COMMAND -------- */
function voiceDraw(){
  if(!('webkitSpeechRecognition' in window)){
    alert("Voice command not supported");
    return;
  }
  let recognition = new webkitSpeechRecognition();
  recognition.lang = 'en-US';
  recognition.start();
  recognition.onresult = function(event){
    let text = event.results[0][0].transcript;
    eq1.value = text;
    draw();
  }
}

/* ids */
const eq1=document.getElementById("eq1");
const eq2=document.getElementById("eq2");
const eq3=document.getElementById("eq3");
const mode=document.getElementById("mode");
const graph=document.getElementById("graph");
const preset=document.getElementById("preset");
const camera3d=document.getElementById("camera3d");
</script>

</body>
</html>
