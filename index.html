<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Er Sandip's 3D Math Visualizer</title>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Poppins', Arial, sans-serif;
  background: #0f172a;
  color: white;
}
header {
  background: linear-gradient(90deg, #1e3a8a, #2563eb);
  padding: 30px;
  text-align: center;
  border-bottom: 3px solid #1e40af;
}
header img {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  border: 2px solid white;
  margin-bottom: 10px;
}
header h1 {
  font-size: 36px;
  margin-bottom: 5px;
}
header p {
  font-size: 18px;
  color: #cbd5e1;
  margin-top:0;
  margin-bottom:15px;
}
input, button, select {
  width: 90%;
  max-width: 350px;
  padding: 8px;
  font-size: 15px;
  margin: 5px auto;
  display: block;
}
button {
  background: #2563eb;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 8px;
  transition: 0.3s;
}
button:hover {
  background: #1d4ed8;
  transform: translateY(-2px);
}
#container {
  display: flex;
  flex-direction: column;
  align-items: center;
}
#graph {
  width: 95%;
  max-width: 1200px;
  height: 60vh;
  margin-top: 20px;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
  background: #0f172a;
}
#historySelect {
  width: 90%;
  max-width: 300px;
  padding: 5px;
  font-size: 14px;
  margin-top: 5px;
  background: #1e293b;
  color: white;
  border: none;
  display: block;
  margin-left:auto;
  margin-right:auto;
}
section.about {
  width:90%;
  margin:20px auto;
  text-align:center;
}
section.about h2 {
  font-size:28px;
  margin-bottom:10px;
}
section.about p {
  font-size:16px;
  color:#cbd5e1;
  line-height:1.5;
}
footer {
  text-align:center;
  padding:15px;
  margin-top:20px;
  background:#020617;
  color:#94a3b8;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  header h1 { font-size: 28px; }
  header p { font-size: 14px; }
  input, button, select { font-size: 14px; padding: 6px; }
  #graph { height: 50vh; }
  section.about h2 { font-size: 22px; }
  section.about p { font-size: 14px; }
  header img { width: 80px; height: 80px; }
}
</style>
</head>

<body>

<header>
  <img src="me.png" alt="Er Sandip Logo" onerror="this.style.display='none'">
  <h1>Er Sandip's 3D Math Visualizer</h1>
  <p>Create 2D & 3D shapes from equations instantly</p>
  <input id="eq" size="34" value="x*x + y*y + z*z - 25">
  <select id="mode">
    <option value="3d">3D</option>
    <option value="2d">2D</option>
  </select>
  <button onclick="draw()">Draw</button>
  <button onclick="exportImage()">Export Image</button>
  <p id="shape">Detected Shape: â€”</p>
  <div>
    <label for="historySelect">History:</label>
    <select id="historySelect" onchange="useHistory()">
      <option value="">--Select previous equation--</option>
    </select>
  </div>
</header>

<section class="about">
  <h2>Welcome to My Math Visualizer</h2>
  <p>
    This tool lets you visualize 2D and 3D mathematical equations as realistic shapes.<br>
    Built by <strong>Er Sandip</strong>. Try different equations and see shapes instantly!
  </p>
</section>

<div id="container">
  <div id="graph"></div>
</div>

<footer>
  &copy; 2026 Er Sandip | All Rights Reserved
</footer>

<script>
let history = [];

function detectShape(eq, mode) {
  if (mode === "3d") {
    if (eq.includes("x*x") && eq.includes("y*y") && eq.includes("z*z"))
      return "Sphere / Ellipsoid";
    if (eq.includes("x*x") && eq.includes("y*y") && eq.includes("- z"))
      return "Paraboloid";
    if (eq.includes("x*x") && eq.includes("y*y"))
      return "Cylinder";
  } else {
    if (eq.includes("x*x") && eq.includes("y*y"))
      return "Circle / Ellipse";
    if (eq.includes("x*x") && eq.includes("- y"))
      return "Parabola";
  }
  return "Unknown Shape";
}

function draw() {
  let eq = document.getElementById("eq").value;
  let mode = document.getElementById("mode").value;

  document.getElementById("shape").innerText =
    "Detected Shape: " + detectShape(eq, mode);

  if (!history.includes(eq)) {
    history.push(eq);
    updateHistory();
  }

  if (mode === "3d") draw3D(eq);
  else draw2D(eq);
}

function draw3D(eq) {
  let xs=[], ys=[], zs=[], values=[];
  for(let x=-6;x<=6;x+=0.4){
    for(let y=-6;y<=6;y+=0.4){
      for(let z=-6;z<=6;z+=0.4){
        let e=eq.replaceAll("x",`(${x})`).replaceAll("y",`(${y})`).replaceAll("z",`(${z})`);
        try{let v=eval(e); xs.push(x); ys.push(y); zs.push(z); values.push(v);}catch{}
      }
    }
  }

  Plotly.newPlot("graph",[{
    type:"isosurface",
    x:xs, y:ys, z:zs, value:values,
    isomin:-0.4, isomax:0.4, surface:{count:1},
    colorscale:[[0,'rgb(0,0,255)'],[0.25,'rgb(0,128,255)'],[0.5,'rgb(0,255,0)'],[0.75,'rgb(255,255,0)'],[1,'rgb(255,0,0)']],
    caps:{x:false,y:false,z:false},
    showscale:true,
    lighting:{ambient:0.5,diffuse:0.7,specular:0.5,roughness:0.5,fresnel:0.2}
  }],{
    paper_bgcolor:"#0f172a",
    scene:{
      xaxis:{color:"white", backgroundcolor:"#1e293b"},
      yaxis:{color:"white", backgroundcolor:"#1e293b"},
      zaxis:{color:"white", backgroundcolor:"#1e293b"},
      bgcolor:"#0f172a",
      camera:{eye:{x:1.5,y:1.5,z:1.5}},
      aspectmode:"cube"
    }
  });
}

function draw2D(eq){
  let x=[],y=[];
  for(let i=0;i<3000;i++){
    let a=(Math.random()-0.5)*10;
    let b=(Math.random()-0.5)*10;
    let e=eq.replaceAll("x",`(${a})`).replaceAll("y",`(${b})`);
    try{if(Math.abs(eval(e))<0.3){x.push(a);y.push(b);}}catch{}
  }
  Plotly.newPlot("graph",[{
    x,y,mode:"markers",type:"scatter",
    marker:{color:y, colorscale:"Viridis", size:5}
  }],{
    paper_bgcolor:"#0f172a",
    xaxis:{color:"white", gridcolor:"#1e293b"},
    yaxis:{color:"white", gridcolor:"#1e293b"}
  });
}

function updateHistory(){
  let select=document.getElementById("historySelect");
  select.innerHTML='<option value="">--Select previous equation--</option>';
  history.forEach(eq=>{
    let option=document.createElement("option");
    option.value=eq; option.text=eq;
    select.appendChild(option);
  });
}

function useHistory(){
  let val=document.getElementById("historySelect").value;
  if(val!==""){document.getElementById("eq").value=val; draw();}
}

function exportImage(){
  Plotly.downloadImage("graph",{format:"png",filename:"math-shape"});
}
</script>

</body>
</html>
